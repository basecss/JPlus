/** * @author  */using("UPlus.Core.IDropDownMenuContainer");using("UPlus.Form.CombinedTextBox");using("UPlus.Form.ListBox");var ComboBox = CombinedTextBox.extend({		_replaceSelect: function(dom){				var textbox = this.dom = $('<input class="b-combobox" type="text" />');				textbox[0].id = dom.id;		dom.id = '';		textbox[0].onchange = dom.onchange;		textbox[0].onkeyup = dom.onkeyup;		textbox[0].onkeydown = dom.onkeydown;		textbox[0].onkeypress = dom.onkeypress;		textbox[0].name = dom.name;  		dom.name = '';				dom.parentNode.replaceChild(textbox[0], dom);		textbox.after('<input type="button" class="b-combobox-arrow" />');				var i = null;				var node = dom.firstChild;				for(; node; node = node.nextSibling) {			if(node.tagName  === 'OPTION') {				var t = $(node).text();			    this.addItem(t, node.value);			 if(i === null || node.selected){			 	i = t;				textbox.val(t);				this.hidden.val(node.value);			 }			 			}		}				return textbox;	},		init: function (options) {				if(this.dom.tagName == 'SELECT') {			this._replaceSelect(this.dom);		}				// 初始化文本框		this.base('init', options);				// 创建并设置下拉菜单		var dropDownMenu = new ListBox();				// 绑定点击事件		dropDownMenu.on('valuechanging', Function.bind(this.onSelect, this));				// 绑定下拉菜单		this.items = dropDownMenu.items;		this.setDropDownMenu(dropDownMenu);				// 点击下拉菜单 执行菜单显示		this.bindMenuButton('click', this.toggleDropDownMenu);				// 设置下拉菜单样式		this.setMenuButton('down');	},		onSelect: function (value) {		this.setText(Element.prototype.getText.call(value));				this.hideDropDownMenu();		this.trigger('change');				return false;	}}).implement(IDropDownMenuContainer);