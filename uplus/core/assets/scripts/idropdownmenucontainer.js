/** * @author  */var IDropDownMenuContainer = {		autoResizeDropDownMenu: true,	setDropDownMenu: function(dropDownMenu){				if(!this.dropDownMenu){			dropDownMenu.setStyle('position', 'absolute');		}				this.dropDownMenu = dropDownMenu;				dropDownMenu.hide();				if(!(dropDownMenu.dom || dropDownMenu).parentNode){			dropDownMenu.appendTo(this.get('parent'));		}			},		realignDropDownMenu: function (offsetX, offsetY) {		var ctrlPos = this.getPosition(),			ctrlSize = this.getSize(),			dropDownMenu = this.dropDownMenu,			size = this.getSize(),			documentSize = document.getSize(),			expectedY = ctrlPos.y + ctrlSize.y + offsetY,			expectedX = ctrlPos.x + offsetX;				// 如果显示之后超出了屏幕右方。		if( expectedY + size.y > documentSize.y ) {						// 移到左边。			expectedY = ctrlPos.y - size.y - offsetX;						if(expectedY < 0){				expectedY = 0;				this.onOverflowY(documentSize.y);			}		}				// 如果垂直部分超出了。进行上移。		if( expectedX + size.x > documentSize.x) {			//  expectedY = Math.max(0, documentSize.y - size.y);			expectedX = Math.max(0, ctrlPos.x + ctrlSize.x - size.x - offsetX);		}					dropDownMenu.setPosition(expectedX, expectedY);	},		onOverflowY: function (max) {		if(this.dropDownMenu.onOverflowY)			this.dropDownMenu.onOverflowY(documentSize.y);	},		toggleDropDownMenu: function(e){		if(e) this._dropDownMenuTrigger = e.target;		return this._dropDownMenuVisible ? this.hideDropDownMenu() : this.showDropDownMenu();	},		showDropDownMenu: function(){				if(this._dropDownMenuVisible){			return ;			}				this._dropDownMenuVisible = true;		this.dropDownMenu.show();		this.realignDropDownMenu(0, 0);		if(this.autoResizeDropDownMenu)			this.dropDownMenu.setSize(this.getSize().x);		this.trigger('dropdownmenuopen');				document.on('mouseup', this.dropDownMenuHandleMouseUp = Function.bind(this.hideDropDownMenu, this));	},		hideDropDownMenu: function (e) {				if(e && (this.dropDownMenu.contains(e.target) || this.contains(e.target) || e.target === this._dropDownMenuTrigger))			return;				this.trigger('dropdownmenuclose');		this.dropDownMenu.hide();		document.un('mouseup', this.dropDownMenuHandleMouseUp);				this._dropDownMenuVisible = false;	}	};